local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local RunService = game:GetService("RunService")

local gui = Instance.new("ScreenGui", game.CoreGui)
gui.Name = "SadUI"

local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.fromScale(0.5, 0.6)
mainFrame.Position = UDim2.fromScale(0.25, 0.2)
mainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
mainFrame.Active = true
mainFrame.Draggable = true
mainFrame.Parent = gui

Instance.new("UICorner", mainFrame).CornerRadius = UDim.new(0, 12)

local titleBar = Instance.new("Frame", mainFrame)
titleBar.Size = UDim2.new(1, 0, 0, 35)
titleBar.BackgroundColor3 = Color3.fromRGB(20, 20, 20)

Instance.new("UICorner", titleBar).CornerRadius = UDim.new(0, 12)

local title = Instance.new("TextLabel", titleBar)
title.Size = UDim2.new(1, -70, 1, 0)
title.Position = UDim2.new(0, 10, 0, 0)
title.BackgroundTransparency = 1
title.Font = Enum.Font.SourceSansBold
title.TextSize = 18
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.TextXAlignment = Enum.TextXAlignment.Left
title.Text = "Sad v1.0.0.2 | See Stats"

local minimizeBtn = Instance.new("TextButton", titleBar)
minimizeBtn.Size = UDim2.new(0, 35, 1, 0)
minimizeBtn.Position = UDim2.new(1, -70, 0, 0)
minimizeBtn.Text = "-"
minimizeBtn.Font = Enum.Font.SourceSansBold
minimizeBtn.TextSize = 20
minimizeBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
minimizeBtn.BackgroundColor3 = Color3.fromRGB(50, 50, 50)

local closeBtn = Instance.new("TextButton", titleBar)
closeBtn.Size = UDim2.new(0, 35, 1, 0)
closeBtn.Position = UDim2.new(1, -35, 0, 0)
closeBtn.Text = "X"
closeBtn.Font = Enum.Font.SourceSansBold
closeBtn.TextSize = 20
closeBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
closeBtn.BackgroundColor3 = Color3.fromRGB(200, 50, 50)

local contentFrame = Instance.new("Frame", mainFrame)
contentFrame.Size = UDim2.new(1, -20, 1, -60)
contentFrame.Position = UDim2.new(0, 10, 0, 45)
contentFrame.BackgroundTransparency = 1

local layout = Instance.new("UIListLayout", contentFrame)
layout.Padding = UDim.new(0, 8)
layout.HorizontalAlignment = Enum.HorizontalAlignment.Center

local function createButton(txt, color)
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(0.8, 0, 0, 40)
    btn.Text = txt
    btn.Font = Enum.Font.SourceSansBold
    btn.TextSize = 20
    btn.TextColor3 = Color3.fromRGB(255, 255, 255)
    btn.BackgroundColor3 = color
    Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 6)
    btn.Parent = contentFrame
    return btn
end

local autoKillBtn = createButton("Auto Kill: OFF", Color3.fromRGB(40, 40, 40))
local killAllBtn = createButton("Kill All", Color3.fromRGB(0, 150, 0))
local stopKillAllBtn = createButton("Stop Kill All", Color3.fromRGB(150, 0, 0))

local playerListFrame = Instance.new("ScrollingFrame", mainFrame)
playerListFrame.Size = UDim2.new(1, -20, 0.35, 0)
playerListFrame.Position = UDim2.new(0, 10, 1, -150)
playerListFrame.BackgroundTransparency = 1
playerListFrame.ScrollBarThickness = 6
playerListFrame.CanvasSize = UDim2.new(0,0,0,0)

local listLayout = Instance.new("UIListLayout", playerListFrame)
listLayout.Padding = UDim.new(0, 4)

-- FUNÇÕES DE KILL
local autoKill = false
local killAll = false

local function killPlayer(plr)
    if plr and plr.Character and plr.Character:FindFirstChild("Humanoid") then
        plr.Character.Humanoid.Health = 0
    end
end

local function tpToPlayer(plr)
    if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") and plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") then
        LocalPlayer.Character.HumanoidRootPart.CFrame = plr.Character.HumanoidRootPart.CFrame + Vector3.new(0,3,0)
    end
end

-- PLAYER LIST
local function updatePlayerList()
    playerListFrame:ClearAllChildren()
    listLayout.Parent = playerListFrame
    for _, plr in ipairs(Players:GetPlayers()) do
        if plr ~= LocalPlayer then
            local item = Instance.new("Frame")
            item.Size = UDim2.new(1, 0, 0, 30)
            item.BackgroundColor3 = Color3.fromRGB(80, 0, 150)
            Instance.new("UICorner", item).CornerRadius = UDim.new(0, 6)

            local name = Instance.new("TextLabel", item)
            name.Size = UDim2.new(0.4, 0, 1, 0)
            name.BackgroundTransparency = 1
            name.Font = Enum.Font.SourceSansBold
            name.TextSize = 16
            name.TextColor3 = Color3.fromRGB(255, 255, 255)
            name.TextXAlignment = Enum.TextXAlignment.Left
            name.Text = plr.Name

            local tpBtn = Instance.new("TextButton", item)
            tpBtn.Size = UDim2.new(0.3, 0, 1, 0)
            tpBtn.Position = UDim2.new(0.4, 0, 0, 0)
            tpBtn.BackgroundColor3 = Color3.fromRGB(0, 200, 200)
            tpBtn.Font = Enum.Font.SourceSansBold
            tpBtn.TextSize = 14
            tpBtn.TextColor3 = Color3.fromRGB(0, 0, 0)
            tpBtn.Text = "Teleport"
            tpBtn.MouseButton1Click:Connect(function()
                tpToPlayer(plr)
            end)

            local killBtn = Instance.new("TextButton", item)
            killBtn.Size = UDim2.new(0.3, 0, 1, 0)
            killBtn.Position = UDim2.new(0.7, 0, 0, 0)
            killBtn.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
            killBtn.Font = Enum.Font.SourceSansBold
            killBtn.TextSize = 14
            killBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
            killBtn.Text = "Kill"
            killBtn.MouseButton1Click:Connect(function()
                killPlayer(plr)
            end)

            item.Parent = playerListFrame
        end
    end
    playerListFrame.CanvasSize = UDim2.new(0,0,0,#Players:GetPlayers() * 34)
end

Players.PlayerAdded:Connect(updatePlayerList)
Players.PlayerRemoving:Connect(updatePlayerList)
updatePlayerList()

-- BOTÕES PRINCIPAIS
autoKillBtn.MouseButton1Click:Connect(function()
    autoKill = not autoKill
    autoKillBtn.Text = "Auto Kill: " .. (autoKill and "ON" or "OFF")
end)

killAllBtn.MouseButton1Click:Connect(function()
    killAll = true
end)

stopKillAllBtn.MouseButton1Click:Connect(function()
    killAll = false
end)

closeBtn.MouseButton1Click:Connect(function()
    gui:Destroy()
end)

local minimized = false
minimizeBtn.MouseButton1Click:Connect(function()
    minimized = not minimized
    contentFrame.Visible = not minimized
    playerListFrame.Visible = not minimized
end)

-- LOOP PRINCIPAL
RunService.Heartbeat:Connect(function()
    if autoKill then
        for _, plr in ipairs(Players:GetPlayers()) do
            if plr ~= LocalPlayer then
                killPlayer(plr)
            end
        end
    end
    if killAll then
        for _, plr in ipairs(Players:GetPlayers()) do
            if plr ~= LocalPlayer then
                killPlayer(plr)
            end
        end
    end
end)
